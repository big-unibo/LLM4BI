# - strutturale o semantica
# - concetti esatti o meno

categories:
  S: search
  O: olap
  B: business oriented
  T: test

questions:
  semantic:
    qt0_descriptive:
      q0: How do these facts, together, represent the end-to-end business process?
      answer: //
      cat: B

      q1: Give me a business-oriented description the Order cube.
      answer: //
      cat: B

    qt1_repair:
      q0: Are there multiple measures with different names but same semantics?
      ## TODO: create an example, e.g., Discount Value -> Price Reduction, NET Value -> Amount After Tax
      ## Crea due versioni diverse, una con errori altra senza
      answer: //
      cat: T

      q1: Are there measures whose aggregation operators are inconsistent with their business meaning? (e.g., SUM for a percentage)
      ## TODO: create an example
      answer: Traffic_Counter_Peopletickets_ratio
      cat: T

      q2: Are there any attributes or hierarchies that could be conformed across different facts but are modeled as separate, non-conformed hierarchies?
      ## TODO: create an example, inject Season_Type as FD in Order fact, Season -> Semester in other facts (with same sample values SS FW)
      answer: Currency, Season
      cat: T

  hybrid:
    qt1:
      question_type: Which cubes and dimensions should I look to analyze casual footwear sales ?
      parameters: [X]
      question: Which cubes and dimensions should I look to analyze casual footwear sales?
      answer: "cubes: Historical_order, Invoice, Order, Shop_Ticket; dimensions: Product_SKU_Subtype"
      cat: S

    qt2:
      question_type: Can I analyze invoices with reference to controllers?
      parameters: [X,Y]
      question: Can I analyze invoices with reference to controllers?
      answer: Yes, but there is a multiple arc between them.
      cat: O

    qt3:
      question_type: Describe the Invoice cube and its dimensions.
      parameters: [X]
      question: Describe the Invoice cube and its dimensions.
      answer: //
      cat: B

    qt4:
      question: I would like to analyze the agents' performances, which facts should I look at?
      answer: //
      cat: S

  structure:
    qt0:
      question_type: Find the facts related to countries.
      template_type: sparql
      template: |
        SELECT DISTINCT ?fact ?p
        WHERE {
          ?fact rdf:type LLM4BI:Fact .
          ?fact ?p ?dep .
          ?p rdfs:subPropertyOf LLM4BI:Dependency .

          <x> LLM4BI:Dependency+ ?productAttr .

          FILTER (?dep = ?productAttr)
        }
      parameters: [x]
      cat: S

    # X, Y in {Attribute}
    qt1:
      question_type: Which relationship holds between brands and categories?
      question_type: Which relationship holds between agents and controllers?
      question_type: Which relationship holds between brands and controllers?
      
      cat: B

      qt: can I aggregate Quantities of shop tickets by area manager and category?
      qt: can I aggregate Quantities of shop tickets by area manager and category in 2025?
      qt: can I aggregate Quantities of shop tickets by area manager and category by Disney Toons merchandise type?

      qt: can I aggregate Quantities of shop tickets by warehouse countries and brands?
      qt: can I aggregate Quantities of shop tickets by Warehouse countries and brands by Disney Toons merchandise type?
      cat: O


    # TODO: e.g., N = [Product, Warehouse]
    qt2:
      question_type:  Which facts can be analyzed by SKU and store together?
      question: Which facts can be analyzed by Product and Store dimensions together?
      answer: Shop_Ticket
      template_type: sparql
      query: |
        SELECT DISTINCT ?n1 ?n2 ?n3 ?n4 ?n5 ?n6
        WHERE {
          BIND(LLM4BI_Indyco:Warehouse_Warehouse AS ?n1)
          ?n1 LLM4BI:Dependency ?n2 .
          OPTIONAL { ?n2 LLM4BI:Dependency ?n3 . }
          OPTIONAL { ?n3 LLM4BI:Dependency ?n4 . }
          OPTIONAL { ?n4 LLM4BI:Dependency ?n5 . }
          OPTIONAL { ?n5 LLM4BI:Dependency ?n6 . }

          FILTER(
            LLM4BI_Indyco:City_State IN (?n2, ?n3, ?n4, ?n5, ?n6)
          )
        }
        # WARNING: FIXED PATH HOP LENGHT
      parameters: [x,y]
      cat: S

    qt4: If I'm aggregating data by SKU, which roll-up paths are available?
    cat: O

    qt4: If I'm aggregating data by year, which drill-down paths are available?
    cat: O

    qt4: can we do a drill-across between invoices and warehouse movements?
      cat: O

    qt5:
      question_type: In which facts can I find information about customers ?
      parameters: [X]
      question: Where can I find informations about customers and the products they bought?
      answer: Historical_Order, Order, Invoice, Shop Ticket
      cat: S


## prompts: keep answer as concise and structured as possble
## PostgresPORT 45532 
## PGAdminPort 45050
