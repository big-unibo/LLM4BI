questions:
  semantic:
    qt0_descriptive:
      q0: How do these facts, together, represent the end-to-end business process?
      answer: //

      q1: Give me a business-oriented description of each cube.
      answer: //

    qt1_repair:
      q0: Are there multiple attributes or measures with different names but same semantics?
      answer: //

      q1: Are there measures whose aggregation operators are inconsistent with their business meaning? (e.g., SUM for a percentage)
      answer: Traffic_Counter_Peopletickets_ratio

      q2: Are there any attributes or hierarchies that could be conformed across different facts but are modeled as separate, non-conformed hierarchies?
      answer: Currency, Season


  structure:
    qt0:
      question_type: Find the facts related to attribute/measure x.
      template_type: sparql
      template: |
        SELECT DISTINCT ?fact ?p
        WHERE {
          ?fact rdf:type LLM4BI:Fact .
          ?fact ?p ?dep .
          ?p rdfs:subPropertyOf LLM4BI:Dependency .

          <x> LLM4BI:Dependency+ ?productAttr .

          FILTER (?dep = ?productAttr)
        }
      parameters: [x]

    # X, Y in {Attribute}
    qt1:
      question_type: Which cardinality relationship holds between X and Y?
      template_type: python
      query: |
        import networkx as nx
        G = nx.DiGraph()
        paths = list(nx.all_simple_paths(G, source=<x>, target=<y>, cutoff=5))
      parameters: [x,y]


    # TODO: e.g., N = [Product, Warehouse]
    qt3:
      question: Which facts can be jointly analyzed by attributes X and Y?
      template_type: sparql
      query: |
        SELECT DISTINCT ?n1 ?n2 ?n3 ?n4 ?n5 ?n6
        WHERE {
          BIND(LLM4BI_Indyco:Warehouse_Warehouse AS ?n1)
          ?n1 LLM4BI:Dependency ?n2 .
          OPTIONAL { ?n2 LLM4BI:Dependency ?n3 . }
          OPTIONAL { ?n3 LLM4BI:Dependency ?n4 . }
          OPTIONAL { ?n4 LLM4BI:Dependency ?n5 . }
          OPTIONAL { ?n5 LLM4BI:Dependency ?n6 . }

          FILTER(
            LLM4BI_Indyco:City_State IN (?n2, ?n3, ?n4, ?n5, ?n6)
          )
        }
        # WARNING: FIXED PATH HOP LENGHT
      parameters: [x,y]
      instance: Which facts can be analyzed by Product and Store dimensions together?
      answer: Shop_Ticket

    qt4:
      question: Are there dangling attributes, i.e., attributes that are not linked to any fact?
      template_type: sparql
      query: |
        SELECT DISTINCT ?attribute
        WHERE {
          ?attribute rdf:type LLM4BI:Attribute .
          FILTER NOT EXISTS {
            ?fact rdf:type LLM4BI:Fact .
            ?fact LLM4BI:Dependency+ ?attribute .
          }
        }
      parameters: []
      instance: Are there dangling attributes defined in the schema that are not linked to any fact?
      answer: Warehouse_name


  hybrid:
    qt0_family:
      q0: Where can I find information about X ?
      parameters: [X]
      instance: Where can I find informations about customers and the products they bought?
      answer: Historical_Order, Order, Invoice, Shop Ticket

      q2: What cubes and dimensions should I look to analyze X ?
      parameters: [X]
      instance: What cubes and dimensions should I look to analyze casual footwear sales?
      answer: "cubes: Historical_order, Invoice, Order, Shop_Ticket; dimensions: Product_SKU_Subtype"

      q1: Can I analyze X with reference to Y?
      parameters: [X,Y]
      instance: Can I analyze invoices with reference to controllers?
      answer: Yes, but there is a multiple arc between them.

    qt1_instance:
      q0: I would like to analyze the agents' performances, which facts should I look at?
      answer: //

      q1: Describe the X cube and its dimensions.
      instance: Describe the Invoice cube and its dimensions.
      answer: //
