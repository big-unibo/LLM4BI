questions:
  semantics:
    q0:
      question: Are there any attributes or hierarchies that could be conformed across different facts but are modeled as separate, non-conformed hierarchies?
      answer:

    q2:
      question: How do these facts, together, represent the end-to-end business process?
      answer:
      query: //

    q3:
      question: Are there multiple attributes or measures with different names but same semantics?
      answer:
      query: //

    q4:
      question: Which attributes refer to Product IDs?
      answer:
      query: ""
      open_question : (?)

    q4:
      question: Are there measures whose aggregation operators are inconsistent with their business meaning? (e.g., SUM for a percentage)
      goal:

    q5:
      question: Give me a business-oriented description of each cube.
      answer:

  structure:
    q0:
      question_type: Find the facts related to attribute/measure x.
      template_type: sparql
      template: |
        SELECT DISTINCT ?fact ?p
        WHERE {
          ?fact rdf:type LLM4BI:Fact .
          ?fact ?p ?dep .
          ?p rdfs:subPropertyOf LLM4BI:Dependency .

          <x> LLM4BI:Dependency+ ?productAttr .

          FILTER (?dep = ?productAttr)
        }
      parameters: [x]

    # X in {Attribute}
    q1:
      question_type: Which cardinality relationship holds between x and y?
      template_type: python
      query: |
        import networkx as nx
        G = nx.DiGraph()
        paths = list(nx.all_simple_paths(G, source=<x>, target=<y>, cutoff=5))
      parameters: [x,y]

    ## Measure types: Flow, Level, Unit, etc.
    q2:
      question: Classify measures as either flow, level, or unit.
      answer:
      template_type: sparql
      query: |
        SELECT ?measure
        WHERE {
          ?measure a LLM4BI:Measure ;
                  LLM4BI:AggregationLevel ?agg .
        }
        GROUP BY ?measure
        HAVING (COUNT(DISTINCT ?agg) > {x})
      parameters: [x]

    # TODO: e.g., N = [Product, Warehouse]
    q3:
      question: Which facts can be jointly analyzed by attributes X and Y?
      answer:
      query: |
        SELECT DISTINCT ?n1 ?n2 ?n3 ?n4 ?n5 ?n6
        WHERE {
          BIND(LLM4BI_Indyco:Warehouse_Warehouse AS ?n1)
          ?n1 LLM4BI:Dependency ?n2 .
          OPTIONAL { ?n2 LLM4BI:Dependency ?n3 . }
          OPTIONAL { ?n3 LLM4BI:Dependency ?n4 . }
          OPTIONAL { ?n4 LLM4BI:Dependency ?n5 . }
          OPTIONAL { ?n5 LLM4BI:Dependency ?n6 . }

          FILTER(
            LLM4BI_Indyco:City_State IN (?n2, ?n3, ?n4, ?n5, ?n6)
          )
        }
        # WARNING: FIXED PATH HOP LENGHT

    q4:
      question: Are there dangling attributes, i.e., attributes that are not linked to any fact?
      answer:
      template_type: sparql
      query: |
        SELECT DISTINCT ?attribute
        WHERE {
          ?attribute rdf:type LLM4BI:Attribute .
          FILTER NOT EXISTS {
            ?fact rdf:type LLM4BI:Fact .
            ?fact LLM4BI:Dependency+ ?attribute .
          }
        }
      parameters:

  hybrid:
    q0:
      question: Where can I find informations about customers and the products they bought?
      answer:

    q1:
      question: Can I analyze invoices with reference to controllers?
      answer:

    q2:
      question: I would like to analyze the agents' performances, which facts should I look at?
      answer:

    q3:
      question: Describe the Invoice cube and its dimensions.
      answer:

    q4:
      question: Which cubes and dimensions should I consider to analyze casual footwear sales?
      answer:
