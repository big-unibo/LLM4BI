questions:
  semantics:
    q0:
      question: Are there any attributes or hierarchies that could be conformed across facts but are modeled as separate, non-conformed hierarchies?
      answer:

    # q1:
    #   question: Which facts represent transactional events versus snapshot events?
    #   answer: Invoice, Warehouse_Movement
    #   query: //

    q2:
      question: How do these facts together represent the end-to-end business process?
      answer:
      query: //

    q3:
      question: Are there multiple attributes or measures with different names but same semantics?
      answer:
      query: //

    q4:
      question: Which attributes refers to Product IDs?
      answer:
      query: ""
      open_question : (?)

    q4:
      question: Are there measures with aggregation operators that are inconsistent with their business meaning? (e.g., SUM for percentage)
      goal:

    q5:
      question: Give me a business oriented description of each cube.
      answer:

  structure:
    # q0:
    #   question_type: Count type of node
    #   template_type: sparql
    #   template: |
    #         SELECT ?entity
    #         WHERE {
    #             ?entity a <x>
    #         }
    #   parameters: [x]

    q1:
      question_type: Find facts from a given x?
      template_type: sparql
      template: |
        SELECT DISTINCT ?fact ?p
        WHERE {
          ?fact rdf:type LLM4BI:Fact .
          ?fact ?p ?dep .
          ?p rdfs:subPropertyOf LLM4BI:Dependency .

          <x> LLM4BI:Dependency+ ?productAttr .

          FILTER (?dep = ?productAttr)
        }
      parameters: [x]

    q2:
      question_type: Which are the relationships between x and y
      template_type: python
      query: |
        import networkx as nx
        G = nx.DiGraph()
        paths = list(nx.all_simple_paths(G, source=<x>, target=<y>, cutoff=5))
      parameters: [x,y]

    ## TODO: Measure types: Flow, Level, Unit, etc.
    q3:
      question: Which measures are aggregated with X measure types?
      answer:
      template_type: sparql
      query: |
        SELECT ?measure
        WHERE {
          ?measure a LLM4BI:Measure ;
                  LLM4BI:AggregationLevel ?agg .
        }
        GROUP BY ?measure
        HAVING (COUNT(DISTINCT ?agg) > {x})
      parameters: [x]

    # TODO: e.g., N = [Product, Warehouse]
    q4:
      question: Which facts can be analyzed by N dimensions together?
      answer:
      query: |
        SELECT DISTINCT ?n1 ?n2 ?n3 ?n4 ?n5 ?n6
        WHERE {
          BIND(LLM4BI_Indyco:Warehouse_Warehouse AS ?n1)
          ?n1 LLM4BI:Dependency ?n2 .
          OPTIONAL { ?n2 LLM4BI:Dependency ?n3 . }
          OPTIONAL { ?n3 LLM4BI:Dependency ?n4 . }
          OPTIONAL { ?n4 LLM4BI:Dependency ?n5 . }
          OPTIONAL { ?n5 LLM4BI:Dependency ?n6 . }

          FILTER(
            LLM4BI_Indyco:City_State IN (?n2, ?n3, ?n4, ?n5, ?n6)
          )
        }
        # WARNING: FIXED PATH HOP LENGHT

    q5:
      question: Are there attributes defined in the schema that are not linked to any fact through a dependency?
      answer:
      template_type: sparql
      query: |
        SELECT DISTINCT ?attribute
        WHERE {
          ?attribute rdf:type LLM4BI:Attribute .
          FILTER NOT EXISTS {
            ?fact rdf:type LLM4BI:Fact .
            ?fact LLM4BI:Dependency+ ?attribute .
          }
        }

      parameters:

    q2:
      question: Are there any circular dependencies between attributes or dimensions that are not convergence/shared/cross-dimensional?
      answer:

  hybrid:
    q0:
      question: Where can I find informations about customers and the products they bought?
      answer:

    q1:
      question: Can I analyze the invoices with respect to the controllers?
      answer:

    q2:
      question: I would like to perform an analysis to evaluate the agents' performances, which entities should I look at?
      answer:


Explain to me how Agent, Customer, Stores and Warehouse are integration points
How can I aggregate along the product hierarchy?
- Coca cola in quale livello è modellato?
goals:
  - refinement
  - exploration



# Se attributo gerarchia condivisa è shared (e.g. customer-billing, customer-shipping) devo mettere isShared sull'attributo di customerCustomer?
# Aggiungi domande di comprensione mista strutturale/semantica, e.g. posso fare roll-up di attributo type? dimmi quali sono i percorsi su cui posso fare roll-up tra product e warehouse


# Aggiungi datamart ai cubi


## TODO:
# 1. Aggiungi famiglia mixed (structural-semantics) -- DONE
# 2. Valutazione quantitativa errori.
# 3. Ci sono domande strutturali a cui io so dare risposta ma un LLM no?
# 4. Domanda comprensione grafo. -- DONE
# 5. Data ontologia, creami un dfm che segua l'ontologia. -- DONE
# 6. Test con graph as a text. -- DONE
# 7. rivedere prompt